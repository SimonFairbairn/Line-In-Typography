/**
 *	Creates typographic overlays for testing line heights and grids
 *
 *	@version 0.2.0
 *
 *	@author	Simon Fairbairn
 *
 */(function(e){"use strict";e.fn.LineInTypography=function(t){function i(t,n){return e("<a />").attr("href","#").attr("id",n).text(t)}function s(t){var n=e("<div />").attr("id","lit-buttons"),s=e("<div />").addClass("lit-controls"),o=i("▲","litButtonUp");o.click(function(){r.bgPos=r.bgPos-1;e("."+r.id).css({"background-position":"0 "+r.bgPos+"px"});return!1});var u=i("▼","litButtonDown");u.click(function(){r.bgPos=r.bgPos+1;e("."+r.id).css({"background-position":"0 "+r.bgPos+"px"});return!1});var a=i("On","litButtonOn");a.click(function(){e(".test-p").toggle();if(e(this).hasClass("off")){e(this).removeClass("off");e(this).text("On");r.changeLineHeight(t.lineHeight)}else{e(this).addClass("off");e(this).text("Off");e(".litLines").attr("style","")}return!1});var f=e("<input />").attr("type","number").attr("name",r.inputId).attr("id",r.inputId).attr("style","max-width: 60px; background: #FAE6E8; border-radius: 5px; border: 1px solid #8E094A; box-shadow: inset 1px 1px 3px rgba(0,0,0,0.3), 0 1px 0 rgba(255,255,255,0.4); padding: 2px 6px; color: #8E094A; font-weight: bold; text-align: center; font-size: 18px; ").val(t.lineHeight).blur(function(){r.changeLineHeight(e(this).val())}).keypress(function(t){e("#litButtonOn").hasClass("off")||t.which==13&&r.changeLineHeight(e(this).val())});s.append(o).append(u).append(a).append(f);var l=e("<div />").addClass("test-p").html(t.testHtml);t.lineState!=="on"&&l.hide();n.append(s);var c=e("<div />").attr("id",r.id).css({"background-position":"0 "+t.backgroundOffset+"px"});t.lineState!=="on"?c.hide():e(t.selector).addClass("litLines");e(t.lineHeightContainer).prepend(l).append(n).append(c)}var n=e.extend({},e.fn.LineInTypography.defaults,t);n.selector=e(this).selector;n.lineHeightContainerHeight=e(n.lineHeightContainer).height();n.lineHeight=Math.round(parseFloat(e(n.lineHeightContainer).css("line-height")));var r={};r.id="litLines";r.bgPos=n.backgroundOffset;r.inputId="litChangeLineHeight";r.stripe1="rgba(255,255,255,0.2)";r.stripe2="rgba(0,0,0,0.1)";r.changeLineHeight=function(t){e(".litLines").css({"-webkit-background-size":parseInt(t,10)*2+"px "+parseInt(t,10)*2+"px"});e(".litLines").css({"-moz-background-size":parseInt(t,10)*2+"px "+parseInt(t,10)*2+"px"});e(".litLines").css({"-o-background-size":parseInt(t,10)*2+"px "+parseInt(t,10)*2+"px"});e(".litLines").css({"background-size":parseInt(t,10)*2+"px "+parseInt(t,10)*2+"px"});e(".litLines").css({"background-image":"-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(50%, "+r.stripe1+"), color-stop(50%, "+r.stripe2+"))"});e(".litLines").css({"background-image":" -webkit-linear-gradient(50% 0%, "+r.stripe1+" 50%, "+r.stripe2+" 50%)"});e(".litLines").css({"background-image":" -moz-linear-gradient(50% 0%, #ffffff 50%, #dddddd 50%)"});e(".litLines").css({"background-image":"-o-linear-gradient(50% 0%, "+r.stripe1+" 50%, "+r.stripe2+" 50%)"});e(".litLines").css({"background-image":"-ms-linear-gradient(50% 0%, "+r.stripe1+" 50%, "+r.stripe2+" 50%)"});e(".litLines").css({"background-image":"linear-gradient(50% 0%, "+r.stripe1+" 50%, "+r.stripe2+" 50%)"});e(".litLines").css({"background-position":"0 "+r.bgPos+"px"})};e(n.selector).addClass("litLines");s(n);var o="<style>";o+="#lit-buttons {";o+="font-family: 'Helvetica', sans-serif; position: fixed; top: 50px; right: 0; z-index: 200; background: #F7B8D3; padding: 15px;";o+="border: 1px solid #8E094A; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.4);";o+="width: 130px;";o+="}";o+="#litButtonOn,#litButtonUp,#litButtonDown {";o+="text-decoration: none; color: #8E094A; text-shadow: 0 1px 0 rgba(255,255,255,0.4)";o+="}";o+="#litButtonOn:hover,#litButtonUp:hover,#litButtonDown:hover {";o+="color: #C73C73;";o+="}";o+="#litButtonOn:active,#litButtonUp:active,#litButtonDown:active {";o+="color: #C73C73; text-shadow: none;";o+="}";o+="#litButtonOn {";o+="margin-right: 10px; width: 15px; display: inline-block; text-align: center";o+="}";o+="#litButtonUp,#litButtonDown {";o+="position: absolute; text-shadow: 0 1px 3px rgba(0,0,0,0.3); ";o+="}";o+="#litButtonUp {";o+="top: 5px;";o+="}";o+="#litButtonDown {";o+="bottom: 0px;";o+="}";o+=".switchImages embed, .switchImages img, .switchImages object, .switchImages video, .switchImages iframe  {";o+="display: none !important;";o+="}";o+=".litLines {";o+="}";o+="</style>";e("head").append(o);r.changeLineHeight(n.lineHeight);return this.each(function(){var t=e(this),n=t.width(),r=t.css("max-width")})};e.fn.LineInTypography.defaults={gridContainer:"#wrap",lineHeightContainer:"body",backgroundOffset:-7,grid:"12",gridState:"off",lineState:"on",testHtml:"<p>Test paragraph to show line height</p>",pluginUrl:"js/mylibs/"}})(jQuery);