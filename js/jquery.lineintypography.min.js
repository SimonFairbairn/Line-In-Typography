/**
 *	Creates typographic overlays for testing line heights and grids
 *
 *	@version 0.2.0
 *
 *	@author	Simon Fairbairn
 *
 */(function(e){"use strict";e.fn.LineInTypography=function(t){function i(t,n){return e("<a />").attr("href","#").attr("id",n).text(t)}function s(t){var n=e("<div />").attr("id","lit-buttons"),s=e("<div />").addClass("lit-controls"),o=i("Up","litButtonUp");o.click(function(){r.bgPos=r.bgPos-1;e("."+r.id).css({"background-position":"0 "+r.bgPos+"px"});return!1});var u=i("Down","litButtonDown");u.click(function(){r.bgPos=r.bgPos+1;e("."+r.id).css({"background-position":"0 "+r.bgPos+"px"});return!1});var a=i("On","litButtonOn");a.click(function(){e(".test-p").toggle();if(e(this).hasClass("off")){e(this).removeClass("off");e(this).text("On");r.changeLineHeight(t.lineHeight)}else{e(this).addClass("off");e(this).text("Off");e(".litLines").attr("style","")}return!1});var f=e("<input />").attr("type","number").attr("name",r.inputId).attr("id",r.inputId).val(t.lineHeight).blur(function(){r.changeLineHeight(e(this).val())}).keypress(function(t){if(t.which==13){r.changeLineHeight(e(this).val());return!1}});s.append(o).append(u).append(a).append(f);var l=e("<div />").addClass("test-p").html(t.testHtml);t.lineState!=="on"&&l.hide();n.append(s);var c=e("<div />").attr("id",r.id).css({"background-position":"0 "+t.backgroundOffset+"px"});t.lineState!=="on"?c.hide():e(t.selector).addClass("litLines");e(t.lineHeightContainer).prepend(l).append(n).append(c)}var n=e.extend({},e.fn.LineInTypography.defaults,t);n.selector=e(this).selector;n.lineHeightContainerHeight=e(n.lineHeightContainer).height();n.lineHeight=Math.round(parseFloat(e(n.lineHeightContainer).css("line-height")));var r={};r.id="litLines";r.bgPos=n.backgroundOffset;r.inputId="litChangeLineHeight";r.changeLineHeight=function(t){e(".litLines").css({"-webkit-background-size":parseInt(t,10)*2+"px "+parseInt(t,10)*2+"px"});e(".litLines").css({"-moz-background-size":parseInt(t,10)*2+"px "+parseInt(t,10)*2+"px"});e(".litLines").css({"-o-background-size":parseInt(t,10)*2+"px "+parseInt(t,10)*2+"px"});e(".litLines").css({"background-size":parseInt(t,10)*2+"px "+parseInt(t,10)*2+"px"});e(".litLines").css({"background-image":"-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(50%, #ffffff), color-stop(50%, #dddddd))"});e(".litLines").css({"background-image":" -webkit-linear-gradient(50% 0%, #ffffff 50%, #dddddd 50%)"});e(".litLines").css({"background-image":" -moz-linear-gradient(50% 0%, #ffffff 50%, #dddddd 50%)"});e(".litLines").css({"background-image":"-o-linear-gradient(50% 0%, #ffffff 50%, #dddddd 50%)"});e(".litLines").css({"background-image":"-ms-linear-gradient(50% 0%, #ffffff 50%, #dddddd 50%)"});e(".litLines").css({"background-image":"linear-gradient(50% 0%, #ffffff 50%, #dddddd 50%)"});e(".litLines").css({"background-position":"0 "+r.bgPos+"px"})};e(n.selector).addClass("litLines");s(n);var o="<style>";o+="#lit-buttons {";o+="position: fixed; top: 50px; right: 0; z-index: 200; background: #fff; padding: 15px;";o+="border: 1px solid #000; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; ";o+="width: 200px;";o+="}";o+=".switchImages embed, .switchImages img, .switchImages object, .switchImages video, .switchImages iframe  {";o+="display: none !important;";o+="}";o+=".litLines {";o+="}";o+="</style>";e("head").append(o);r.changeLineHeight(n.lineHeight);return this.each(function(){var t=e(this),n=t.width(),r=t.css("max-width")})};e.fn.LineInTypography.defaults={gridContainer:"#wrap",lineHeightContainer:"body",backgroundOffset:-7,grid:"12",gridState:"off",lineState:"on",testHtml:"<p>Test paragraph to show line height</p>",pluginUrl:"js/mylibs/"}})(jQuery);